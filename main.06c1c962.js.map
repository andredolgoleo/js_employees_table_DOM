{"version":3,"sources":["scripts/main.js"],"names":["drawNewEmployeerForm","tHead","document","querySelector","tBody","insertAdjacentHTML","addEventListener","e","sortElements","arrOfElements","i","isNum","sort","a","b","children","innerText","replace","localeCompare","reverseSortElements","allTr","querySelectorAll","item","target","index","map","category","findIndex","sortedElemsArr","dataset","sorted","forEach","append","removeAttribute","isSorted","push","length","el","parentNode","className","initialText","attr","style","cssText","handler","code","setAttribute","focus","sendFormButton","formForNewEmployee","value","toUpperCase","slice","preventDefault","container","createElement","pushNotification","posTop","posRight","title","description","type","body","message","h2","p","innerHTML","classList","add","right","top","data","FormData","inputs","arrForValidation","valid","getAttribute","setTimeout","remove","get","salaryNum","result","toLocaleString","section","display"],"mappings":"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","file":"main.06c1c962.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\ndrawNewEmployeerForm();\n\nconst tHead = document.querySelector('table thead');\nconst tBody = document.querySelector('table tbody');\n\ntHead.addEventListener('click', e => {\n  function sortElements(arrOfElements, i, isNum = false) {\n    if (isNum) {\n      return arrOfElements.sort((a, b) =>\n        a.children[i].innerText.replace(/[^\\d]/g, '')\n        - b.children[i].innerText.replace(/[^\\d]/g, ''));\n    };\n\n    return arrOfElements.sort(\n      (a, b) =>\n        a.children[i].innerText.localeCompare(b.children[i].innerText)\n    );\n  }\n\n  function reverseSortElements(arrOfElements, i, isNum = false) {\n    if (isNum) {\n      return arrOfElements.sort((a, b) =>\n        b.children[i].innerText.replace(/[^\\d]/g, '')\n        - a.children[i].innerText.replace(/[^\\d]/g, ''));\n    };\n\n    return arrOfElements.sort(\n      (a, b) =>\n        b.children[i].innerText.localeCompare(a.children[i].innerText)\n    );\n  }\n\n  const allTr = [...document.querySelectorAll('tbody tr')];\n  const item = e.target;\n\n  const allTh = [...document.querySelectorAll(\n    'table thead tr th'\n  )].map(category => category.innerText);\n\n  const index = allTh.findIndex(a => a === item.innerText);\n\n  const sortedElemsArr = [];\n\n  switch (item.innerText) {\n    case 'Name' :\n\n      if (item.dataset.sorted === 'true') {\n        reverseSortElements(allTr, index).forEach(a => tBody.append(a));\n        item.removeAttribute('data-sorted');\n        break;\n      }\n      item.dataset.sorted = 'true';\n\n      sortElements(allTr, index).forEach(a => tBody.append(a));\n      break;\n\n    case 'Position' :\n\n      if (item.dataset.sorted === 'true') {\n        reverseSortElements(allTr, index).forEach(a => tBody.append(a));\n        item.removeAttribute('data-sorted');\n        break;\n      }\n      item.dataset.sorted = 'true';\n\n      sortElements(allTr, index).forEach(a => tBody.append(a));\n      break;\n\n    case 'Office' :\n\n      if (item.dataset.sorted === 'true') {\n        reverseSortElements(allTr, index).forEach(a => tBody.append(a));\n        item.removeAttribute('data-sorted');\n        break;\n      }\n      item.dataset.sorted = 'true';\n\n      sortElements(allTr, index).forEach(a => tBody.append(a));\n      break;\n\n    case 'Salary' :\n\n      if (item.dataset.sorted === 'true') {\n        reverseSortElements(allTr, index, true).forEach(a => tBody.append(a));\n        item.removeAttribute('data-sorted');\n        break;\n      }\n      item.dataset.sorted = 'true';\n\n      sortElements(allTr, index, true).forEach(a => tBody.append(a));\n      break;\n\n    case 'Age' :\n\n      if (item.dataset.sorted === 'true') {\n        reverseSortElements(allTr, index, true).forEach(a => tBody.append(a));\n        item.removeAttribute('data-sorted');\n        break;\n      }\n      item.dataset.sorted = 'true';\n\n      sortElements(allTr, index, true).forEach(a => tBody.append(a));\n      break;\n  };\n\n  [...document.querySelectorAll(\n    'table thead tr th'\n  )].forEach(isSorted => {\n    if (isSorted.dataset.sorted === 'true') {\n      sortedElemsArr.push(isSorted);\n    };\n  });\n\n  if (sortedElemsArr.length > 1) {\n    [...document.querySelectorAll(\n      'table thead tr th'\n    )].forEach(el => {\n      el.dataset.sorted = 'false';\n    });\n  }\n});\n\ntBody.addEventListener('click', e => {\n  const item = e.target;\n\n  [...tBody.children].forEach(a => {\n    a.removeAttribute('class');\n  });\n\n  item.parentNode.className = 'active';\n});\n\ntBody.addEventListener('dblclick', e => {\n  const item = e.target;\n  const initialText = item.innerText;\n\n  [...document.querySelectorAll('tbody tr td')].forEach(attr => {\n    attr.removeAttribute('contentEditable');\n    attr.removeAttribute('style');\n  });\n\n  item.style.cssText = `\n  user-select: none;\n  border: none;\n  overflow: auto;\n  outline: none;\n  -webkit-box-shadow: none;\n  -moz-box-shadow: none;\n  box-shadow: none;\n`;\n\n  item.addEventListener('blur', handler => {\n    if (handler.target.innerText === '') {\n      handler.target.innerText = initialText;\n    }\n    item.removeAttribute('contentEditable');\n    item.removeAttribute('style');\n  });\n\n  item.addEventListener('keydown', a => {\n    if (a.code === 'Enter') {\n      if (a.target.innerText === '') {\n        a.target.innerText = initialText;\n      }\n      item.removeAttribute('contentEditable');\n      item.removeAttribute('style');\n    }\n  });\n\n  item.setAttribute('contentEditable', '');\n  item.focus();\n});\n\nfunction drawNewEmployeerForm() {\n  const employeeForm = `\n    <form method=\"post\" class=\"new-employee-form\">\n      <label for=\"name\">\n        Name:\n        <input required name=\"name\" data-qa=\"name\" type=\"text\">\n      </label>\n\n      <label for=\"position\">\n        Position:\n        <input required name=\"position\" data-qa=\"position\" type=\"text\">\n      </label>\n\n      <label for=\"office\">\n        Office:\n        <select name=\"office\" data-qa=\"office\" type=\"text\">\n          <option>Tokyo</option>\n          <option>Singapore</option>\n          <option>London</option>\n          <option>New York</option>\n          <option>Edinburgh</option>\n          <option>San Francisco</option>\n        </select>\n      </label>\n\n      <label for=\"age\">\n        Age:\n        <input required name=\"age\" data-qa=\"age\" type=\"number\">\n      </label>\n\n      <label for=\"salary\">\n        Salary:\n        <input name=\"salary\" data-qa=\"salary\" type=\"number\">\n      </label>\n\n      <button type=\"submit\" id=\"sendForm\">Save to table</button>\n    </form>\n  `;\n\n  document.querySelector('body').insertAdjacentHTML('beforeend', employeeForm);\n}\n\nconst sendFormButton = document.querySelector('#sendForm');\nconst formForNewEmployee = document.querySelector('.new-employee-form');\n\n[...document.querySelectorAll('input')].forEach(a => {\n  a.addEventListener('input', function() {\n    this.value = this.value[0].toUpperCase() + this.value.slice(1);\n  });\n});\n\nformForNewEmployee.addEventListener('click', e => {\n  e.preventDefault();\n\n  const container = document.createElement('div');\n\n  const pushNotification = (posTop, posRight, title, description, type) => {\n    const body = document.querySelector('body');\n    const message = document.createElement('div');\n    const h2 = document.createElement('h2');\n    const p = document.createElement('p');\n\n    h2.innerHTML = title;\n    h2.className = 'title';\n\n    p.innerHTML = description;\n\n    message.className = 'notification';\n    container.setAttribute('data-qa', 'notification');\n    message.classList.add(type);\n    message.append(h2);\n    message.append(p);\n    message.style.right = posRight + 'px';\n    message.style.top = posTop + 'px';\n    container.append(message);\n\n    body.append(container);\n  };\n\n  const item = e.target;\n\n  if (item !== sendFormButton) {\n    return;\n  }\n\n  const data = new FormData(formForNewEmployee);\n  const inputs = [...document.querySelectorAll('input')];\n\n  document.querySelector('option').setAttribute('selected', '');\n\n  document.querySelector('option').removeAttribute('selected');\n\n  const arrForValidation = [];\n\n  inputs.map(valid => {\n    if (valid.value === '') {\n      arrForValidation.push(valid.getAttribute('name'));\n    }\n  });\n\n  if (arrForValidation.length > 0) {\n    pushNotification(10, 10, 'Error',\n      `Invalid form. Please fill ${arrForValidation[0]}`, 'error');\n\n    setTimeout(() => {\n      container.remove();\n    }, 2000);\n\n    return;\n  }\n\n  if (data.get(\n    'name').length < 4 || data.get('age') < 18 || data.get('age') > 90\n  ) {\n    container.className = 'error';\n\n    if (data.get('name').length < 4) {\n      pushNotification(10, 10, 'Error',\n        `Invalid form. Name must have more then 3 letter`, 'error');\n\n      setTimeout(() => {\n        container.remove();\n      }, 2000);\n\n      return;\n    }\n\n    pushNotification(10, 10, 'Error',\n      `Invalid form. You age must be more then 18 or less 90`, 'error');\n\n    setTimeout(() => {\n      container.remove();\n    }, 2000);\n\n    return;\n  }\n\n  const salaryNum = +data.get('salary');\n\n  const result = `\n    <tr style=\"\">\n      <td>${data.get('name')}</td>\n      <td>${data.get('position')}</td>\n      <td>${data.get('office')}</td>\n      <td>${data.get('age')}</td>\n      <td>$${salaryNum.toLocaleString('en-US')}</td>\n    </tr>\n  `;\n\n  tBody.insertAdjacentHTML('beforeend', result);\n\n  pushNotification(10, 10, 'Success! You added a new employeer into table',\n    `Congratulation! You added a new employeer! `, 'success');\n\n  inputs.forEach(value => {\n    value.value = '';\n  });\n  container.className = 'success';\n\n  setTimeout(() => {\n    container.remove();\n  }, 2000);\n});\n\nconst section = document.createElement('section');\n\nsection.append(document.querySelector('table'));\nsection.append(document.querySelector('form'));\n\nsection.style.display = 'flex';\n\ndocument.querySelector('body').append(section);\n"]}